#!/usr/bin/env bash

# install `glib2` `gvfs`
ifinstalled "gio" | exit
ifinstalled "fzf" | exit

# chosen=$(gio trash --list | cut -f2 | nl -s ' > ' | dmenu -i -l 30 | cut -d '>' -f1)
chosen=$(gio trash --list | cut -f2 | nl -s ' > ' | fzf | cut -d '>' -f1)

if [[ -n "$chosen" ]]; then
  recover=$(gio trash --list | sed -n "${chosen}p" | cut -f1)
  gio trash --restore "$recover"
  printf "recover file \e[36m%s\e[0m\n" "$recover"
fi
